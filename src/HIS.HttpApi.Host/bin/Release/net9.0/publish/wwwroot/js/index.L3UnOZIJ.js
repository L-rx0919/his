import{aX as e,d as a,r as t,S as l,o as i,g as o,f as d,m as r,w as n,$ as s,C as m,F as p,P as u,Q as _,e as c,i as f,aC as v}from"./index.ZLNrSxa7.js";import{E as b}from"./el-dialog.B32-6Hy6.js";import"./el-overlay.TtYSBS3d.js";import{a as j,E as g}from"./el-form-item.CSlDAgNu.js";import{a as y,E as V}from"./el-radio-group.L_l3Yw1E.js";/* empty css                 */import{E as h}from"./el-input.DEr4JItJ.js";import{E as x}from"./el-date-picker.CiCbA5E0.js";import"./el-scrollbar.ET7HVX21.js";import"./el-popper.B221JJYw.js";import{E as I}from"./el-button.DSrO3PCY.js";/* empty css               */import{E as k,a as w}from"./el-select.35Upkc1v.js";import{E as T,a as E}from"./el-table-column.SMPDE2Gk.js";import"./el-checkbox.BmPwdX9L.js";import"./el-tooltip.l0sNRNKZ.js";import{E as U}from"./index.DVD0Ui0f.js";import"./index.CAmgOVMc.js";import"./refs.CwYjimeG.js";import"./index.D_Z5gYVY.js";import"./vnode.BzFWtM5t.js";import"./index.C7eagngv.js";import"./error.CmW-dgG_.js";import"./scroll.CuImcdyA.js";import"./use-form-common-props.C1EZqqFQ.js";import"./castArray.BeWz_jd2.js";import"./_Uint8Array.DXkM4Snb.js";import"./index.BnUUwnwX.js";import"./index.BQb3_wVy.js";import"./dayjs.min.DspShc8e.js";import"./index.D2Bf9u9x.js";import"./index.Cqrz8MS-.js";import"./isEqual.DHfRWznk.js";import"./index.CjPWYcvS.js";import"./token.DWNpOE8r.js";import"./strings.C35vyqlw.js";import"./_baseIteratee.Bs4VfSlC.js";import"./validator.DGpTlVtL.js";const C="/api/v1/his/inpatientRecord",D={addInpatientRecord:a=>e({url:`${C}/insertInpatientRecord`,method:"post",data:a}),GetDepartment:()=>e({url:`${C}/getDepartment`,method:"get",params:{}}),GetPatient:()=>e({url:`${C}/getPatient`,method:"get",params:{}}),GetDoctor:()=>e({url:`${C}/getDoctor`,method:"get",params:{}}),getList:a=>e({url:`${C}/patient_id`,method:"get",params:a}),delList:a=>e({url:`${C}/id`,method:"delete",params:a}),updInpatientRecord:(a,t)=>e({url:`${C}/updInpatientRecord`,method:"put",data:t})},$={class:"dialog-footer"},G=a({__name:"index",setup(e){const a=()=>{D.getList(A.value).then((e=>{z.value=e}))},C=t([]),G=t([]),M=t([]),P=t({patient_id:"",admission_date:"",discharge_date:"",department_id:"",doctor_id:"",room_type:"",admission_reason:"",is_in_insurance:!0}),R=l({dialogVisible:!1,title:""}),L=t({id:"",concurrencyStamp:"",creationTime:"",creatorId:"",lastModificationTime:"",lastModifierId:"",isDeleted:!1,deleterId:"",deletionTime:"",patient_id:"",patient_name:"",admission_date:"",discharge_date:"",department_id:"",department_name:"",doctor_id:"",doctor_name:"",room_type:"",admission_reason:"",is_in_insurance:!0}),S=e=>{R.dialogVisible=!0,null==e?(R.title="新增住院信息",P.value={patient_id:"",admission_date:"",discharge_date:"",department_id:"",doctor_id:"",room_type:"",admission_reason:"",is_in_insurance:!0}):(L.value={id:e.id,concurrencyStamp:e.concurrencyStamp,creationTime:e.creationTime,creatorId:e.creatorId,lastModificationTime:e.lastModificationTime,lastModifierId:e.lastModifierId,isDeleted:e.isDeleted,deleterId:e.deleterId,deletionTime:e.deletionTime,patient_id:e.patient_id,patient_name:e.patient_name,admission_date:e.admission_date,discharge_date:e.discharge_date,department_id:e.department_id,department_name:e.department_name,doctor_id:e.doctor_id,doctor_name:e.doctor_name,room_type:e.room_type,admission_reason:e.admission_reason,is_in_insurance:e.is_in_insurance},R.dialogVisible=!0,R.title="查看住院信息")},z=t([]),A=t({});return i((()=>{a(),D.GetDepartment().then((e=>{C.value=e})),D.GetDoctor().then((e=>{G.value=e})),D.GetPatient().then((e=>{M.value=e}))})),(e,t)=>{const l=I,i=j,L=T,A=E,B=w,K=k,O=x,Q=h,X=V,q=y,F=g,J=b;return d(),o(u,null,[r(i,null,{default:n((()=>[r(l,{type:"primary",onClick:t[0]||(t[0]=e=>S(null))},{default:n((()=>t[12]||(t[12]=[s("新增住院")]))),_:1})])),_:1}),r(A,{data:z.value,border:"",style:{width:"100%"}},{default:n((()=>[r(L,{width:"55",type:"selection"}),r(L,{prop:"patient_name",label:"患者姓名"}),r(L,{prop:"admission_date",label:"入院时间"},{default:n((({row:e})=>[m("span",null,p(e.admission_date.slice(0,10)),1)])),_:1}),r(L,{prop:"discharge_date",label:"出院时间"},{default:n((({row:e})=>[m("span",null,p(e.discharge_date.slice(0,10)),1)])),_:1}),r(L,{prop:"department_name",label:"科室名称"}),r(L,{prop:"doctor_name",label:"主治医生姓名"}),r(L,{prop:"room_type",label:"病房类型"}),r(L,{prop:"admission_reason",label:"入院信息"}),r(L,{prop:"is_in_insurance",label:"是否住院"},{default:n((({row:e})=>[m("span",null,p(e.is_in_insurance?"住院":"离院"),1)])),_:1}),r(L,{label:"操作"},{default:n((({row:e})=>[r(l,{type:"text",size:"small",onClick:t=>{return l=e,void U.confirm("确定要删除吗?","警告",{confirmButtonText:"OK",cancelButtonText:"取消",type:"warning"}).then((()=>{D.delList(l).then((()=>{v({type:"success",message:"删除成功!"}),a()}))})).catch((()=>{v({type:"info",message:"已取消删除"})}));var l}},{default:n((()=>t[13]||(t[13]=[s("删除")]))),_:2},1032,["onClick"]),r(l,{type:"text",size:"small",onClick:a=>S(e)},{default:n((()=>t[14]||(t[14]=[s("查看")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),r(J,{modelValue:f(R).dialogVisible,"onUpdate:modelValue":t[11]||(t[11]=e=>f(R).dialogVisible=e),title:f(R).title,width:"500",draggable:"",overflow:""},{footer:n((()=>[m("div",$,[r(l,{type:"primary",onClick:t[9]||(t[9]=e=>{D.addInpatientRecord(P.value).then((()=>{R.dialogVisible=!1,a()}))})},{default:n((()=>t[17]||(t[17]=[s("确定")]))),_:1}),r(l,{type:"danger",onClick:t[10]||(t[10]=e=>f(R).dialogVisible=!1)},{default:n((()=>t[18]||(t[18]=[s("关闭")]))),_:1})])])),default:n((()=>[r(F,{model:P.value},{default:n((()=>[r(i,{label:"患者姓名"},{default:n((()=>[r(K,{modelValue:P.value.patient_id,"onUpdate:modelValue":t[1]||(t[1]=e=>P.value.patient_id=e)},{default:n((()=>[(d(!0),o(u,null,_(M.value,(e=>(d(),c(B,{key:e.id,label:e.patient_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(i,{label:"入院时间"},{default:n((()=>[r(O,{modelValue:P.value.admission_date,"onUpdate:modelValue":t[2]||(t[2]=e=>P.value.admission_date=e),type:"date",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),r(i,{label:"出院时间"},{default:n((()=>[r(O,{modelValue:P.value.discharge_date,"onUpdate:modelValue":t[3]||(t[3]=e=>P.value.discharge_date=e),type:"date",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),r(i,{label:"科室名称"},{default:n((()=>[r(K,{modelValue:P.value.department_id,"onUpdate:modelValue":t[4]||(t[4]=e=>P.value.department_id=e)},{default:n((()=>[(d(!0),o(u,null,_(C.value,(e=>(d(),c(B,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(i,{label:"主治医生姓名"},{default:n((()=>[r(K,{modelValue:P.value.doctor_id,"onUpdate:modelValue":t[5]||(t[5]=e=>P.value.doctor_id=e)},{default:n((()=>[(d(!0),o(u,null,_(G.value,(e=>(d(),c(B,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(i,{label:"病房类型"},{default:n((()=>[r(Q,{modelValue:P.value.room_type,"onUpdate:modelValue":t[6]||(t[6]=e=>P.value.room_type=e),placeholder:"请输入病房类型",clearable:""},null,8,["modelValue"])])),_:1}),r(i,{label:"入院信息"},{default:n((()=>[r(Q,{modelValue:P.value.admission_reason,"onUpdate:modelValue":t[7]||(t[7]=e=>P.value.admission_reason=e),type:"textarea",placeholder:"请输入院信息",clearable:""},null,8,["modelValue"])])),_:1}),r(i,{label:"是否住院"},{default:n((()=>[r(q,{modelValue:P.value.is_in_insurance,"onUpdate:modelValue":t[8]||(t[8]=e=>P.value.is_in_insurance=e)},{default:n((()=>[r(X,{value:!0},{default:n((()=>t[15]||(t[15]=[s("住院")]))),_:1}),r(X,{value:!1},{default:n((()=>t[16]||(t[16]=[s("离院")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])],64)}}});export{G as default};
