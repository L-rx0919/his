import{aX as e,d as a,r as l,S as t,o,g as d,f as r,m as n,w as s,i as m,$ as p,C as i,F as u,P as _,Q as c,e as f,aj as b}from"./index.ZLNrSxa7.js";import{E as V}from"./el-dialog.B32-6Hy6.js";import"./el-overlay.TtYSBS3d.js";import{E as j}from"./el-date-picker.CiCbA5E0.js";import{E as y}from"./el-input.DEr4JItJ.js";import"./el-scrollbar.ET7HVX21.js";import"./el-popper.B221JJYw.js";import{E as g}from"./el-button.DSrO3PCY.js";/* empty css               */import{E as h,a as v}from"./el-select.35Upkc1v.js";import{E as x,a as k}from"./el-table-column.SMPDE2Gk.js";import"./el-checkbox.BmPwdX9L.js";import"./el-tooltip.l0sNRNKZ.js";import{a as U,E as P}from"./el-form-item.CSlDAgNu.js";import"./index.CAmgOVMc.js";import"./refs.CwYjimeG.js";import"./index.D_Z5gYVY.js";import"./vnode.BzFWtM5t.js";import"./index.C7eagngv.js";import"./error.CmW-dgG_.js";import"./scroll.CuImcdyA.js";import"./use-form-common-props.C1EZqqFQ.js";import"./dayjs.min.DspShc8e.js";import"./index.D2Bf9u9x.js";import"./index.Cqrz8MS-.js";import"./index.BnUUwnwX.js";import"./index.BQb3_wVy.js";import"./isEqual.DHfRWznk.js";import"./_Uint8Array.DXkM4Snb.js";import"./index.CjPWYcvS.js";import"./token.DWNpOE8r.js";import"./strings.C35vyqlw.js";import"./castArray.BeWz_jd2.js";import"./_baseIteratee.Bs4VfSlC.js";const C="/api/v1/his/patient",I={getList:a=>e({url:`${C}/page`,method:"get",params:a}),GetPatientNameAndId:()=>e({url:`${C}/getPatientNameAndId`,method:"get",params:{}}),getPatientCardInfos:()=>e({url:`${C}/getPatientCardInfos`,method:"get",params:{}}),insertPatientCardInfo:a=>e({url:`${C}/insertPatientCardInfo`,method:"post",data:a}),GetDepartment:()=>e({url:`${C}/getDepartment`,method:"get",params:{}})},E={key:0},w={key:1},A={class:"dialog-footer"},$=a({__name:"index",setup(e){const a=l([]),C=t({}),$=()=>{G()},G=()=>{I.getPatientCardInfos().then((e=>{a.value=e}))},D=l([]),N=l(!1),T=l([]);N.value||(I.GetDepartment().then((e=>{D.value=e})),I.GetPatientNameAndId().then((e=>{T.value=e})));const L=l({patient_id:"",card_status:"",card_type:"",balance:0,create_date:"",expiry_date:"",last_transaction_date:"",card_owner_name:"",associated_dept:"",contact_phone:"",remarks:""}),Q=()=>{I.insertPatientCardInfo(L.value).then((()=>{N.value=!1,G()}))};return o((()=>{G()})),(e,l)=>{const t=y,o=U,I=g,G=P,S=x,X=k,q=v,z=h,F=j,J=V;return r(),d(_,null,[n(G,{inline:!0,model:m(C),class:"demo-form-inline"},{default:s((()=>[n(o,{label:"患者名称"},{default:s((()=>[n(t,{modelValue:m(C).name,"onUpdate:modelValue":l[0]||(l[0]=e=>m(C).name=e),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])])),_:1}),n(o,{label:"患者手机号"},{default:s((()=>[n(t,{modelValue:m(C).phone,"onUpdate:modelValue":l[1]||(l[1]=e=>m(C).phone=e),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])])),_:1}),n(o,null,{default:s((()=>[n(I,{type:"primary",style:{"margin-left":"30px"},onClick:$},{default:s((()=>l[15]||(l[15]=[p("查询")]))),_:1}),n(I,{type:"primary",style:{"margin-left":"200px"},onClick:l[2]||(l[2]=e=>N.value=!0)},{default:s((()=>l[16]||(l[16]=[p(" 一卡通办理 ")]))),_:1}),n(I,{type:"primary",style:{"margin-left":"10px"}},{default:s((()=>l[17]||(l[17]=[p("一卡通启用")]))),_:1}),n(I,{type:"primary",style:{"margin-left":"10px"}},{default:s((()=>l[18]||(l[18]=[p("一卡通停用")]))),_:1})])),_:1})])),_:1},8,["model"]),n(X,{data:m(a),style:{width:"100%"}},{default:s((()=>[n(S,{prop:"patient_name",label:"姓名",width:"180"}),n(S,{prop:"patient_gender",label:"性别"}),n(S,{prop:"patient_age",label:"年龄"}),n(S,{prop:"marital_status",label:"婚姻状态"}),n(S,{prop:"emergency_contact",label:"紧急联系人"}),n(S,{prop:"patient_address",label:"住址"}),n(S,{prop:"card_status",label:"卡状态"},{default:s((({row:e})=>["启用"===e.card_status?(r(),d("span",E,"启用")):(r(),d("span",w,"停用"))])),_:1}),n(S,{prop:"creationTime",label:"创建时间"},{default:s((({row:e})=>[i("span",null,u(e.creationTime.slice(0,10)),1)])),_:1})])),_:1},8,["data"]),n(J,{modelValue:m(N),"onUpdate:modelValue":l[14]||(l[14]=e=>b(N)?N.value=e:null),title:"一卡通办理",width:"500",draggable:"",overflow:""},{footer:s((()=>[i("div",A,[n(I,{type:"primary",onClick:Q},{default:s((()=>l[19]||(l[19]=[p("确定")]))),_:1}),n(I,{type:"danger",onClick:l[13]||(l[13]=e=>N.value=!1)},{default:s((()=>l[20]||(l[20]=[p("关闭")]))),_:1})])])),default:s((()=>[l[21]||(l[21]=i("span",null,"基本信息",-1)),n(G,{model:m(L)},{default:s((()=>[n(o,{label:"姓名"},{default:s((()=>[n(z,{modelValue:m(L).patient_id,"onUpdate:modelValue":l[3]||(l[3]=e=>m(L).patient_id=e)},{default:s((()=>[(r(!0),d(_,null,c(m(T),(e=>(r(),f(q,{key:e.id,label:e.patient_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(o,{label:"联系电话"},{default:s((()=>[n(t,{modelValue:m(L).contact_phone,"onUpdate:modelValue":l[4]||(l[4]=e=>m(L).contact_phone=e),placeholder:"请输入联系电话",clearable:""},null,8,["modelValue"])])),_:1}),n(o,{label:"卡状态"},{default:s((()=>[n(z,{modelValue:m(L).card_status,"onUpdate:modelValue":l[5]||(l[5]=e=>m(L).card_status=e)},{default:s((()=>[n(q,{label:"启用",value:"启用"}),n(q,{label:"停用",value:"停用"})])),_:1},8,["modelValue"])])),_:1}),n(o,{label:"卡类型"},{default:s((()=>[n(z,{modelValue:m(L).card_type,"onUpdate:modelValue":l[6]||(l[6]=e=>m(L).card_type=e)},{default:s((()=>[n(q,{label:"普通卡",value:"普通卡"}),n(q,{label:"白金卡",value:"白金卡"}),n(q,{label:"钻石卡",value:"钻石卡"})])),_:1},8,["modelValue"])])),_:1}),n(o,{label:"余额"},{default:s((()=>[n(t,{modelValue:m(L).balance,"onUpdate:modelValue":l[7]||(l[7]=e=>m(L).balance=e),placeholder:"请输入余额",clearable:""},null,8,["modelValue"])])),_:1}),n(o,{label:"所属科室"},{default:s((()=>[n(z,{modelValue:m(L).associated_dept,"onUpdate:modelValue":l[8]||(l[8]=e=>m(L).associated_dept=e)},{default:s((()=>[(r(!0),d(_,null,c(m(D),(e=>(r(),f(q,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(o,{label:"时间"},{default:s((()=>[n(F,{modelValue:m(L).create_date,"onUpdate:modelValue":l[9]||(l[9]=e=>m(L).create_date=e)},null,8,["modelValue"])])),_:1}),n(o,{label:"有效时间"},{default:s((()=>[n(F,{modelValue:m(L).expiry_date,"onUpdate:modelValue":l[10]||(l[10]=e=>m(L).expiry_date=e)},null,8,["modelValue"])])),_:1}),n(o,{label:"上次交易时间"},{default:s((()=>[n(F,{modelValue:m(L).last_transaction_date,"onUpdate:modelValue":l[11]||(l[11]=e=>m(L).last_transaction_date=e)},null,8,["modelValue"])])),_:1}),n(o,{label:"备注"},{default:s((()=>[n(t,{modelValue:m(L).remarks,"onUpdate:modelValue":l[12]||(l[12]=e=>m(L).remarks=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}});export{$ as default};
